.text-collapse {
  position: relative;
  overflow: hidden; // 溢出裁剪
  // display: -webkit-box; // 设置此属性 -webkit-line-clamp 才有效
  // -webkit-line-clamp: 3; // 把 块容器 中的内容限制为指定的行数
  // -webkit-box-orient: vertical; // 盒子垂直布局其内容 设置此属性 -webkit-line-clamp 才有效
  line-height: 1.5;
  max-height: 4.5em; // 3 行*行高
  transition: 0.3s max-height;
}

.text-collapse::after {
  content: '';
  width: 100%;
  height: 100%;
  position: absolute;
  // background: rgba(255, 0, 0, 0.5);
  background-color: #fff;
}

[line-clamp='1'] {
  max-height: 1.5em;
}
[line-clamp='2'] {
  max-height: 3em;
}

.text-collapse-btn {
  position: relative;
  float: right; // 右浮动
  /* 按钮样式 */
  background-color: $blue;
  padding: 0 8px;
  border-radius: 2px;
  color: #fff;
  cursor: pointer;
  transition: all 0.3s;
  margin-left: 25px;
  // margin-top: 40px;
  clear: both;
}

.text-collapse-btn::after {
  content: '展开';
}

.text-collapse-btn::before {
  content: '...';
  position: absolute;
  right: 100%;
  color: #333;
  padding: 0 4px 0 25px;
  background: linear-gradient(90deg, transparent, #fff 50%);
}

.text-collapse::before {
  content: '';
  float: right;
  // width: 5px;
  width: 0px;

  // height: 40px; // 两行文本的高度
  background: $red;
  height: 100%;
  margin-bottom: -22px;
}

.text-collapse-wrap {
  display: flex;
}

#collapse {
  width: 0;
  height: 0;
  opacity: 0;
  &:checked + .text-collapse {
    // -webkit-line-clamp: 999; // 设置一个足够大的行数就可以了 只考虑 chrome
    // max-height: none; // 展开无动效
    max-height: 300px; // 展开有动效 设置一个安全的值 超过最大行高度
    .text-collapse-btn::before {
      visibility: hidden; // 展开时隐藏省略号
    }
    .text-collapse-btn::after {
      content: '收起'; // 展开时改变文案
    }
  }
}

#collapse:checked + .text-collapse {
  // 展开时隐藏遮挡层
  &::after {
    visibility: hidden;
  }
}

// // 多行文本省略
// .text-collapse {
//   overflow: hidden; // 溢出裁剪
//   // display: -webkit-box; // 设置此属性 -webkit-line-clamp 才有效
//   // -webkit-line-clamp: 3; // 把 块容器 中的内容限制为指定的行数
//   // -webkit-box-orient: vertical; // 盒子垂直布局其内容 设置此属性 -webkit-line-clamp 才有效
//   line-height: 1.5;
//   max-height: 4.5em; // 3 行*行高
//   overflow: hidden;
//   /* 展开收起有动效 */
//   transition: 0.3s max-height;
//   /* 用于 after 伪元素定位*/
//   position: relative;
// }
// // 按钮基于文本右下角环绕
// .text-collapse-btn {
//   float: right; // 右浮动
//   /* 按钮样式 */
//   background-color: $blue;
//   padding: 0 8px;
//   border-radius: 2px;
//   color: #fff;
//   cursor: pointer;
//   transition: all 0.3s;
//   /* margin-top 不行 会留白*/
//   // margin-top: 40px;
//   /* 让按钮实现右下角定位 */
//   clear: both;
//   /* 让伪元素定位 */
//   position: relative;
// }
// .text-collapse-btn::after {
//   content: '展开';
// }
// // 给文本父元素加一个伪元素 before - 实现按钮右下角
// .text-collapse::before {
//   content: '';
//   float: right;
//   width: 1px;
//   // height: 45px; // 两行文本的高度
//   height: 100%;
//   margin-bottom: -21px;
//   background: $red;
// }
// // 给文本父元素加一个伪元素 after - 实现文本不截断时遮挡按钮
// .text-collapse::after {
//   content: '';
//   width: 100%;
//   height: 100%;
//   position: absolute;
//   background: rgba(255, 0, 0, 0.5);
//   // background-color: #fff;
// }
// // 解决 height 100% 不生效问题
// .text-collapse-wrap {
//   display: flex;
// }
// // max-height 控制行数
// [line-clamp='1'] {
//   max-height: 1.5em;
// }
// [line-clamp='2'] {
//   max-height: 3em;
// }
// [line-clamp='3'] {
//   max-height: 4.5em;
// }
// [line-clamp='4'] {
//   max-height: 6em;
// }
// // 模拟实现 ... 的伪元素
// .text-collapse-btn::before {
//   content: '...';
//   position: absolute;
//   right: 100%;
//   color: #333;
//   padding: 0 4px 0 25px;
//   background: linear-gradient(90deg, transparent, #fff 50%);
// }
// #collapse {
//   width: 0;
//   height: 0;
//   opacity: 0;
//   &:checked + .text-collapse {
//     // -webkit-line-clamp: 999; // 设置一个足够大的行数就可以了 只考虑 chrome
//     // max-height: none; // 展开无动效
//     max-height: 300px; // 展开有动效 设置一个安全的值 超过最大行高度
//     .text-collapse-btn::before {
//       visibility: hidden; // 展开时隐藏省略号
//     }
//     .text-collapse-btn::after {
//       content: '收起'; // 展开时改变文案
//     }
//     // 展开时隐藏遮挡层
//     &::after {
//       visibility: hidden;
//     }
//   }
// }
